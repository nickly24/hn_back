# H&N Backend

–ë—ç–∫–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è H&N - Flask API —Å–µ—Ä–≤–µ—Ä —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ò–ò –∏ –∫–∞–Ω–±–∞–Ω-—Å–∏—Å—Ç–µ–º–æ–π.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.8+
- Flask - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- Flask-SQLAlchemy - ORM –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- Flask-CORS - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ CORS
- PyMySQL - –¥—Ä–∞–π–≤–µ—Ä MySQL
- SQLite - –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- üîê API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üí¨ –ß–∞—Ç —Å –ò–ò –º–æ–¥–µ–ª—è–º–∏
- üìã –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∏ (4 –¥–æ—Å–∫–∏)
- üóÑÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- üåê CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python app.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ app.py              # –û—Å–Ω–æ–≤–Ω–æ–π Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ models/             # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ api/                # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

### –ú–æ–¥–µ–ª–∏ –ò–ò
- `GET /api/models` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

### –ß–∞—Ç—ã
- `GET /api/chats` - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/chats` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞
- `GET /api/chats/<id>/messages` - –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
- `POST /api/chat` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
- `PATCH /api/chats/<id>` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞
- `DELETE /api/chats/<id>` - –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–∞

### –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∏
- `GET /api/web_canban` - –ó–∞–¥–∞—á–∏ Web –∫–∞–Ω–±–∞–Ω–∞
- `POST /api/web_canban` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `PUT /api/web_canban/<id>` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `DELETE /api/web_canban/<id>` - –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö –¥–æ—Å–æ–∫:
- `tsd_android_canban`
- `win_tsd_canban`
- `system_canban`

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `config.py` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:

```python
class Config:
    SECRET_KEY = 'your-secret-key'
    DB_HOST = 'localhost'
    DB_PORT = 3306
    DB_USER = 'username'
    DB_PASSWORD = 'password'
    DB_NAME = 'database_name'
```

## CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª—é–±—ã–º–∏ —Ö–æ—Å—Ç–∞–º–∏:
- –†–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ origins (`*`)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ HTTP –º–µ—Ç–æ–¥—ã
- –†–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- Preflight –∑–∞–ø—Ä–æ—Å—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **–û—Å–Ω–æ–≤–Ω–∞—è –ë–î**: MySQL –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —á–∞—Ç–æ–≤
- **–ö–∞–Ω–±–∞–Ω –ë–î**: MySQL –¥–ª—è –∑–∞–¥–∞—á –∏ –¥–æ—Å–æ–∫
- **SQLite**: –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
