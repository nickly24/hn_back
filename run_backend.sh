#!/bin/bash

echo "üöÄ –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞ –Ω–∞ –ø–æ—Ä—Ç—É 80..."

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ—Ä—Ç 80 —Å–≤–æ–±–æ–¥–µ–Ω
if lsof -Pi :80 -sTCP:LISTEN -t >/dev/null ; then
    echo "‚ùå –ü–æ—Ä—Ç 80 –∑–∞–Ω—è—Ç. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 80 –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ sudo"
    echo "üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ: sudo lsof -i :80"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "‚úÖ –ó–∞–ø—É—Å–∫ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ http://localhost:80"
echo "üîß API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:80/api"
echo ""
echo "–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"

python app.py
